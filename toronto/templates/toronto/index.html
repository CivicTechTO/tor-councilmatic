{% extends "base.html" %}
{% load staticfiles %}
{% block title %}{{ CITY_COUNCIL_NAME }}, demystified{% endblock %}

{% block full_content %}
    <div class="container-fluid" id="section-photo">
        <div class="row-fluid">
            <div class='col-sm-10 col-sm-offset-1'>
                <br/>
                <h2>
                    <h1>{{ CITY_COUNCIL_NAME }}, demystified</h1>
                </h2>
                <br/>

                <p class="h3 no-pad-top">
                    <span>Search {{CITY_NAME}} legislation</span>
                </p>

                <form class="search form-search=" action="/search/" method="GET">
                    <div class="input-group site-intro-search">
                        <input name="q" type="text" class="input-lg form-control" placeholder="{{SEARCH_PLACEHOLDER_TEXT}}">
                        <div class='input-group-btn'>
                            <button type="submit" class="btn btn-lg btn-primary">
                                <i class='fa fa-fw fa-search'></i>
                            </button>
                        </div>
                    </div>
                </form>

                <div class="divider"></div>
            </div>
        </div>
    </div>
    <div class="container-fluid" id="section-intro">
        <div class="row-fluid">
            <div class='col-sm-10 col-sm-offset-1'>
                <div class="divider"></div>

                <div class='row'>
                    <div class='col-sm-8'>
                      <p>{{ CITY_COUNCIL_NAME }} consists of <a href='/council-members/' target="_blank">44 elected councillors</a> and meets monthly to shape the city. The council works with <a href='/person/john-tory/'  target="_blank">John Tory</a>, the Mayor, and <a href='http://www1.toronto.ca/wps/portal/contentonly?vgnextoid=07b700ad867a0410VgnVCM10000071d60f89RCRD&vgnextchannel=a7b78b206f2ef310VgnVCM10000071d60f89RCRD' target="_blank">Ulli S. Watkiss</a>, the City Clerk.</p>

                        <p>
                        <strong>{{ CITY_NAME }} Councilmatic</strong> tracks all things related to {{ CITY_COUNCIL_NAME }}:
                            <ul>
                                <li>
                                    the <a href='/search/' target="_blank">legislation</a> introduced and passed
                                </li>
                                <li>
                                    its various <a href='/committees/' target="_blank">committees</a> and the <a href='/events/'  target="_blank">meetings</a> they hold
                                </li>
                                <li>
                                    the <a href='/council-members/' target="_blank">councillors</a> themselves
                                </li>
                            </ul>
                        </p>
                        <p>
                            <span class="non-mobile-only">
                                Read more about how <a href='/about#about-city-council'  target="_blank">City Council works &raquo;</a>
                            </span>
                            <span class="mobile-only">
                                <a href='/about#about-city-council' target="_blank">More on how City Council works &raquo;</a>
                            </span>

                        </p>
                    </div>

                    <div class= 'col-sm-4 desktop-only'>

                        <p class='text-center'>
                            <a href='/council-members/' target="_blank"><img id="map-screenshot" src='/static/images/toronto_map.jpg' class='img-responsive img-rounded' title='City of Toronto Wards' alt="Toronto's 44 Wards" /></a>
                            <em>Toronto's 44 Wards</em>
                        </p>

                    </div>
                </div>

                <div class="divider"></div>

            </div>
        </div>
    </div>

    <div class="container-fluid" id="section-engage">
        <div class="row-fluid">
            <div class='col-sm-10 col-sm-offset-1'>
                <h2>
                    <span class="non-mobile-only">
                      <i class="fa fa-fw fa-institution"></i>Engage {{ CITY_COUNCIL_NAME }}
                    </span>
                    <span class="mobile-only">
                        <i class="fa fa-institution"></i>
                        Engage City Council
                    </span>
                </h2>

                <div class='row'>
                    <div class='col-sm-6'>
                        <h4>Citywide issues</h4>
                        <p>The Mayor proposes most city-wide policies. These include <a href='/search/?q=&selected_facets=topics_exact:City Business' target="_blank">business transactions</a>, changes to the <a href='/search/?q=&selected_facets=topics_exact:Municipal Code' target="_blank">municipal code</a>, <a href='/search/?q=&selected_facets=topics_exact:Bonds' target="_blank">bond issuance</a> and <a href='/search/?q=&selected_facets=topics_exact:Appointment' target="_blank">appointments</a>.</p>

                        <p>
                            <a class='btn btn-primary' href='/search/?q=&selected_facets=topics_exact:City Matters'>
                                View citywide legislation <i class="fa fa-fw fa-chevron-right"></i>
                            </a>
                        </p>
                        <br/>
                    </div>
                    <div class='col-sm-6'>
                        <h4>Local issues</h4>
                        <p>At the local level, matters like <a href='/search/?q=&selected_facets=topics_exact:Land Use' target="_blank">land use</a>, <a href='/search/?q=&selected_facets=topics_exact:Sign permits' target="_blank">signs</a>, <a href='/search/?q=&selected_facets=topics_exact:Parking' target="_blank">street parking</a>, <a href='/search/?q=&selected_facets=topics_exact:Business Permits and Privileges' target="_blank">business permits</a>, and other <a href='/search/?q=&selected_facets=topics_exact:Residents' target="_blank">residents issues</a> require the local Councillor's support.</p>

                        <p>
                            <a class='btn btn-primary' href='/council-members/'>
                                Find your councillor <i class="fa fa-fw fa-chevron-right"></i>
                            </a>
                        </p>
                        <br/>
                    </div>
                    <div class="divider"></div>
                </div>


            </div>
        </div>
    </div>


    <div class="container-fluid" id="section-events">
        <div class="row-fluid">
            <div class='col-sm-10 col-sm-offset-1'>

                {% if next_council_meeting or upcoming_committee_meetings %}
                    <h2>
                        <i class="fa fa-fw fa-calendar-o non-mobile-only"></i>
                        <i class="fa fa-calendar-o mobile-only"></i>
                        Upcoming Meetings
                    </h2>
                    <br/>


                    {% if next_council_meeting %}

                    <h4><i class="fa fa-fw fa-institution"></i> Next City Council meeting</h4>

                    <p class="small text-muted">
                        <i class="fa fa-fw fa-calendar-o"></i> {{next_council_meeting.start_time | date:"D n/d/Y"}}<br/>
                        <i class="fa fa-fw fa-clock-o"></i> {{next_council_meeting.start_time| date:"g:ia"}}<br/>
                        <i class="fa fa-fw fa-map-marker"></i> Council Chambers, City Hall<br />
                        <i class="fa fa-fw"></i> 100 Queen St W, Toronto, ON
                    </p>
                    <a class='btn btn-info btn-sm' href="{{next_council_meeting.event_page_url}}/">
                        Details
                        <i class="fa fa-fw fa-chevron-right"></i>
                    </a>
                    <br/><br/>

                    {% endif %}

                    {% if upcoming_committee_meetings %}
                        <h4>
                            Committee meetings
                        </h4>
                        {% for event in upcoming_committee_meetings %}
                            <p class="no-pad-bottom small">
                                {{event.start_time | date:"D"}}
                                {{event.start_time | date:"m/d"}} -

                                {{ event.link_html | safe }}

                            </p>
                        {% endfor %}
                        <br/>
                        <a href="/events/" class="btn btn-sm btn-info">
                            All upcoming events
                            <i class="fa fa-fw fa-chevron-right"></i>
                        </a>
                    {% endif %}
                {% endif %}

                <div class="divider"></div>
            </div>
        </div>
    </div>

{% endblock %}


{% block extra_js %}
    <script>
        $(document).ready(function() {
            $(".plusminus").parent().parent().click(function () {
                if ($(this).children().eq(1).hasClass("panel-collapse collapse in")){
                    $(this).find('i').removeClass("fa-minus").addClass("fa-plus");
                } else{
                    $(this).find('i').removeClass("fa-plus").addClass("fa-minus");
                }
            });


            function collapseBillsMeeting(){
                $(".bill-meeting:gt(3)").hide();
                $("#more-bills-meeting").show();
                $("#fewer-bills-meeting").hide();
            }
            function expandBillsMeeting(){
                $(".bill-meeting:gt(3)").show();
                $("#more-bills-meeting").hide();
                $("#fewer-bills-meeting").show();
            }
            function collapseBillsRecent(){
                $(".bill-recent:gt(3)").hide();
                $("#more-bills-recent").show();
                $("#fewer-bills-recent").hide();
            }
            function expandBillsRecent(){
                $(".bill-recent:gt(3)").show();
                $("#more-bills-recent").hide();
                $("#fewer-bills-recent").show();
            }

            collapseBillsMeeting();
            collapseBillsRecent();

            $("#more-bills-meeting").click(function() {
                expandBillsMeeting();
                return false;
            });
            $("#fewer-bills-meeting").click(function() {
                collapseBillsMeeting();
                return false;
            });
            $("#more-bills-recent").click(function() {
                expandBillsRecent();
                return false;
            });
            $("#fewer-bills-recent").click(function() {
                collapseBillsRecent();
                return false;
            });


        });
    </script>
{% endblock %}
